<?xml version="1.0" encoding="utf-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping http://doctrine-project.org/schemas/orm/doctrine-mapping.xsd">
    <mapped-superclass name="Sonata\Bundle\OrderBundle\Entity\BaseOrder">

        <field name="reference"           nullable="true"   type="string"   column="reference"          length="255"/>
        <field name="payment_method"      nullable="true"   type="string"   column="payment_method"     length="255"/>
        <field name="delivery_method"     nullable="true"   type="string"   column="delivery_method"    length="255"/>
        <field name="currency"            nullable="true"   type="string"   column="currency"           length="3"/>
        <field name="status"              nullable="true"   type="integer"  column="status"/>
        <field name="payment_status"      nullable="true"   type="integer"  column="payment_status"/>
        <field name="delivery_status"     nullable="true"   type="integer"  column="delivery_status"/>
        <field name="validated_at"        nullable="true"   type="datetime" column="validated_at"/>
        <field name="username"            nullable="true"   type="string"   column="username"           length="255"/>
        <field name="total_inc"           nullable="true"   type="decimal"  column="total_inc"          scale="4"/>
        <field name="total_excl"          nullable="true"   type="decimal"  column="total_excl"         scale="4"/>
        <field name="delivery_cost"       nullable="true"   type="decimal"  column="delivery_cost"      scale="4"/>

        <field name="billing_name"         nullable="true"  type="string"   column="billing_name"       length="255"/>
        <field name="billing_phone"        nullable="true"  type="string"   column="billing_phone"      length="255"/>
        <field name="billing_address1"     nullable="true"  type="string"   column="billing_address1"   length="255"/>
        <field name="billing_address2"     nullable="true"  type="string"   column="billing_address2"   length="255"/>
        <field name="billing_address3"     nullable="true"  type="string"   column="billing_address3"   length="255"/>
        <field name="billing_city"         nullable="true"  type="string"   column="billing_city"       length="255"/>
        <field name="billing_postcode"     nullable="true"  type="string"   column="billing_postcode"   length="255"/>
        <field name="billing_country_code" nullable="true"  type="string"   column="billing_country_code"    length="255"/>
        <field name="billing_fax"          nullable="true"  type="string"   column="billing_fax"        length="255"/>
        <field name="billing_email"        nullable="true"  type="string"   column="billing_email"      length="255"/>
        <field name="billing_mobile"       nullable="true"  type="string"   column="billing_mobile"     length="255"/>

        <field name="shipping_name"         nullable="true" type="string"   column="shipping_name"      length="255"/>
        <field name="shipping_phone"        nullable="true" type="string"   column="shipping_phone"     length="255"/>
        <field name="shipping_address1"     nullable="true" type="string"   column="shipping_address1"  length="255"/>
        <field name="shipping_address2"     nullable="true" type="string"   column="shipping_address2"  length="255"/>
        <field name="shipping_address3"     nullable="true" type="string"   column="shipping_address3"  length="255"/>
        <field name="shipping_city"         nullable="true" type="string"   column="shipping_city"      length="255"/>
        <field name="shipping_postcode"     nullable="true" type="string"   column="shipping_postcode"  length="255"/>
        <field name="shipping_country_code" nullable="true" type="string"   column="shipping_country_code"   length="255"/>
        <field name="shipping_fax"          nullable="true" type="string"   column="shipping_fax"       length="255"/>
        <field name="shipping_email"        nullable="true" type="string"   column="shipping_email"     length="255"/>
        <field name="shipping_mobile"       nullable="true" type="string"   column="shipping_mobile"    length="255"/>

        <field name="updated_at"  nullable="true"  column="updated_at"     type="datetime" />
        <field name="created_at"  nullable="true"  column="created_at"     type="datetime" />

        <one-to-many
            field="order_elements"
            target-entity="Application\OrderBundle\Entity\OrderElement"
            mapped-by="order"
            >

            <cascade>
                <cascade-all />
            </cascade>

            <join-columns>
                <join-column
                    name="id"
                    referenced-column-name="order_id"
                    on-delete="CASCADE"/>
            </join-columns>
        </one-to-many>
        
    </mapped-superclass>
</doctrine-mapping>
