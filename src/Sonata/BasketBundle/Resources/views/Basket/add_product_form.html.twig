{#

This file is part of the Sonata package.

(c) Thomas Rabaix <thomas.rabaix@sonata-project.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}

{% if provider.getOption('product_add_modal') %}
    {% block product_javascript_init %}
        <script src="{{ asset('bundles/sonatabasket/modal.js') }}" type="text/javascript"></script>
    {% endblock %}

    {% block product_add_basket_modal %}
    <div class="row">
        <div class="col-lg-12">
            <div id="add_basket_modal" class="modal fade"></div>
        </div>
    </div>
    {% endblock %}
{% endif %}

<div class="row">
    <div class="col-lg-12">
        <form id="form_add_basket" class="form-horizontal" action="{{ url('sonata_basket_add_product') }}" method="POST"{% if provider.getOption('product_add_modal') %} data-target="#add_basket_modal"{% endif %}>

            {{ form_row(form.quantity, {'attr': {'min': 1}}) }}

            <div class="form-group">
                <div class="col-lg-6 col-xs-6">
                    <span id="sonata_product_pricue" class="lead">
                        {% block product_price_price %}
                            {% if provider.hasEnabledVariations(product) %}
                                {{ cheapest_variation.price|number_format_currency(currency) }}
                            {% else %}
                                {{ product.price|number_format_currency(currency) }}
                            {% endif %}
                        {% endblock %}
                    </span>
                </div>
                <div class="col-lg-6 col-xs-6">
                    <button type="submit" class="btn btn-primary btn-sm" id="sonata_add_basket_submit"{% if sonata_product_stock(product) == 0 %} disabled{% endif %}>
                        <i class="glyphicon glyphicon-shopping-cart icon-white"></i>{% trans from 'SonataProductBundle' %}sonata.product.btn_add_to_basket{% endtrans %}
                    </button>
                </div>
            </div>

            {{ form_rest(form) }}
        </form>
    </div>
</div>
