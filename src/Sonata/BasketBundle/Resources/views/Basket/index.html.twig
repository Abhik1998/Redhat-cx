{#

This file is part of the Sonata package.

(c) Thomas Rabaix <thomas.rabaix@sonata-project.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}

<h1>{% trans from 'BasketBundle' %}title_basket{% endtrans %}</h1>

{% if basket.hasBasketElements %}
    {{ form_errors(form) }}

    <form action="{{ url('sonata_basket_update') }}" method="POST" >

        <table>
            {#
            <thead>
                <tr>
                    <td>{% trans from 'BasketBundle'%}header_basket_information{% endtrans %}</td>
                    <td>{% trans from 'BasketBundle'%}header_basket_price{% endtrans %}</td>
                    <td>{% trans from 'BasketBundle'%}header_basket_quantity{% endtrans %}</td>
                    <td>{% trans from 'BasketBundle'%}header_basket_total{% endtrans %}</td>
                    <td>{% trans from 'BasketBundle'%}header_basket_delete{% endtrans %}</td>
                </tr>
            </thead>
            #}
            <tbody>
                {# call each product controller to render its own view #}
                {% for basketElement in basket.getBasketElements %}
                    {% render 'SonataProductBundle:Product:renderFormBasketElement' with {
                        'fieldGroup': form.basketElements.get(basketElement.pos),
                        'basketElement' : basketElement
                    } %}
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3"></td>
                    <td><b>{{ basket.getTotal(true) }}</b></td>
                    <td></td>
                </tr>
            </tfoot>
        </table>

        <input type="submit" value="{% trans from 'BasketBundle' %}btn_update_basket{% endtrans %}" />

        <a href="{{ url('sonata_basket_authentification') }}">{% trans from 'BasketBundle' %}link_next_step{% endtrans %}</a>

        {{ form_rest(form) }}
    </form>

{% else %}

    <p>{% trans from 'BasketBundle' %}message_basket_is_empty{% endtrans %}</p>

{% endif %}

{% if form.isValid %}

{% endif %}
